<!DOCTYPE html>
<html>
<head>
  <title>ESP32 LED Control</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <h2>ESP32 LED Control (Pin 4)</h2>
  <button onclick="toggleLED()">Toggle LED</button>
  <p>Status: <span id="status">OFF</span></p>

  <script>
    // Firebase config
    const firebaseConfig = {
     apiKey: "AIzaSyAFTxTvVYH6IsVBLZtrr84qvkc0JsARTTQ",
    authDomain: "esp32-led-ed9ea.firebaseapp.com",
    databaseURL: "https://esp32-led-ed9ea-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "esp32-led-ed9ea",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const ledRef = db.ref('pin4');

    // Toggle LED
    function toggleLED() {
      ledRef.get().then(snapshot => {
        const value = snapshot.val();
        ledRef.set(value === 1 ? 0 : 1);
      });
    }

    // Listen for changes
    ledRef.on('value', snapshot => {
      const value = snapshot.val();
      document.getElementById('status').innerText = value === 1 ? "ON" : "OFF";
    });
  </script>
</body>
</html>
